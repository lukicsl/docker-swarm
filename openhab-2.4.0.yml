version: "3"

services:

  openhab:
    image: openhab/openhab:2.4.0
    networks:
      - monitor
      - proxy
    environment:
      - OPENHAB_HTTP_PORT: "8080"
      - OPENHAB_HTTPS_PORT: "8443"
      - EXTRA_JAVA_OPTS: "-Duser.timezone=Europe/Berlin"   
    volumes:
      - "/etc/localtime:/etc/localtime:ro"
      - "/etc/timezone:/etc/timezone:ro"
      - "./openhab_addons:/openhab/addons"
      - "./openhab_conf:/openhab/conf"
      - "./openhab_userdata:/openhab/userdata"
   deploy:
      labels:
        - com.df.notify=true
        - com.df.distribute=true
        - com.df.servicePath=/openhab/
        - com.df.reqPathSearch=/openhab
        - com.df.port=8080

networks:
  monitor:
    external: true
  proxy:
    external: true
